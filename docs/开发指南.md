# 宿舍管理系统开发指南

## 项目介绍

本项目是一个基于Spring Boot 3 + Vue3的宿舍管理系统，采用前后端分离架构设计。

### 技术栈

**后端技术栈：**
- Spring Boot 3.2.0
- Spring Security 6.x (认证授权)
- JWT (JSON Web Token)
- MyBatis-Plus 3.5.4
- MySQL 8.0
- Redis
- Knife4j (API文档)

**前端技术栈：**
- Vue 3.4.0
- Vite 5.0
- Element Plus (UI组件库)
- Vue Router 4 (路由)
- Pinia (状态管理)
- Axios (HTTP请求)
- TypeScript

## 开发环境要求

- JDK 17+
- Node.js 16+
- MySQL 8.0+
- Redis 6.0+
- Maven 3.6+

## 快速开始

### 1. 克隆项目
```bash
git clone https://github.com/your-repo/dormitory-management.git
cd dormitory-management
```

### 2. 数据库初始化
```bash
# 创建数据库并导入初始化脚本
mysql -u root -p < database/init.sql
```

### 3. 后端启动
```bash
cd backend
# 修改配置文件中的数据库连接信息
vim src/main/resources/application.yml

# 安装依赖并启动
mvn clean install
mvn spring-boot:run
```

后端启动后访问：
- API地址: http://localhost:8080/api
- API文档: http://localhost:8080/api/doc.html

### 4. 前端启动
```bash
cd frontend
npm install
npm run dev
```

前端启动后访问：http://localhost:3000

### 5. 登录信息
- 用户名: admin
- 密码: 123456

## 项目结构

```
dormitory-management/
├── backend/                   # 后端项目
│   ├── src/main/java/com/dormitory/management/
│   │   ├── config/           # 配置类
│   │   ├── controller/       # 控制器
│   │   ├── service/          # 业务逻辑
│   │   ├── mapper/           # 数据访问层
│   │   ├── entity/           # 实体类
│   │   ├── dto/              # 数据传输对象
│   │   ├── vo/               # 视图对象
│   │   ├── utils/            # 工具类
│   │   └── common/           # 公共类
│   └── src/main/resources/
│       ├── mapper/           # MyBatis映射文件
│       └── application.yml   # 配置文件
├── frontend/                  # 前端项目
│   ├── src/
│   │   ├── api/              # API接口
│   │   ├── assets/           # 静态资源
│   │   ├── components/       # 公共组件
│   │   ├── router/           # 路由配置
│   │   ├── stores/           # 状态管理
│   │   ├── types/            # TypeScript类型定义
│   │   ├── utils/            # 工具函数
│   │   └── views/            # 页面组件
│   ├── package.json
│   └── vite.config.ts
├── database/                  # 数据库脚本
├── docs/                      # 项目文档
└── README.md
```

## 开发规范

### 后端开发规范

1. **包命名规范**
   - controller: 使用Controller结尾
   - service: 使用Service或ServiceImpl结尾
   - mapper: 使用Mapper结尾
   - entity: 实体类名与表名对应

2. **接口规范**
   - 所有API接口遵循RESTful规范
   - 统一返回Result<T>包装结果
   - 使用@Valid注解进行参数校验

3. **数据库规范**
   - 表名使用下划线命名法
   - 字段名使用下划线命名法
   - 主键统一使用id
   - 统一包含create_time, update_time, deleted等基础字段

### 前端开发规范

1. **组件命名规范**
   - 组件名使用PascalCase
   - 文件名与组件名保持一致

2. **代码规范**
   - 使用TypeScript进行类型检查
   - 遵循ESLint和Prettier配置
   - 使用Vue 3 Composition API

3. **路由规范**
   - 路由配置统一在router/index.ts中管理
   - 使用懒加载方式引入页面组件

## 核心功能模块

### 1. 宿舍楼管理
- 楼栋信息的增删改查
- 楼层和宿舍信息的维护

### 2. 学生管理
- 学生档案管理
- 宿舍分配和调换
- 入住和退宿记录

### 3. 报修管理
- 报修申请和提交
- 维修进度跟踪
- 维修记录查询

### 4. 卫生检查
- 卫生检查评分
- 检查记录管理
- 统计分析

### 5. 访客管理
- 访客登记
- 访问记录查询
- 访客统计

### 6. 费用管理
- 水电费记录
- 费用统计
- 缴费管理

### 7. 数据统计
- 入住率统计
- 性别分布统计
- 宿舍使用情况分析

## 部署说明

### 后端部署

1. 打包应用
```bash
cd backend
mvn clean package -DskipTests
```

2. 上传jar包到服务器
3. 启动应用
```bash
java -jar dormitory-management-1.0.0.jar
```

### 前端部署

1. 构建项目
```bash
cd frontend
npm run build
```

2. 将dist目录部署到nginx等Web服务器

## 常见问题

### Q: 如何添加新的功能模块？
A:
1. 设计数据库表结构
2. 创建对应的entity、dto、vo类
3. 实现mapper、service、controller层
4. 创建前端页面和API接口
5. 配置路由和权限

### Q: 如何进行权限控制？
A: 项目使用Spring Security + JWT进行权限控制，可通过SecurityUtil工具类获取当前用户信息

### Q: 如何添加新的角色？
A:
1. 修改sys_user表中的role字段
2. 在JWT生成时包含角色信息
3. 在前端添加角色判断逻辑

### Q: JWT Token如何管理？
A:
1. Access Token有效期24小时，用于API请求认证
2. Refresh Token有效期7天，用于刷新Access Token
3. Token过期时会自动尝试刷新，失败则需重新登录

## 联系方式

如有问题或建议，请联系：
- 邮箱: admin@dormitory.com
- 项目地址: https://github.com/your-repo/dormitory-management